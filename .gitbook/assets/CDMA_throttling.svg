<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="864px" preserveAspectRatio="none" style="width:1966px;height:864px;background:#FFFFFF;" version="1.1" viewBox="0 0 1966 864" width="1966px" zoomAndPan="magnify"><defs><filter height="300%" id="foh2sw2w3s2df" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="250" x="860" y="28.708">Happy flow CDMA throttling</text><rect fill="#FFFFFF" filter="url(#foh2sw2w3s2df)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="634" x="1215.5" y="572.8047"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="142" x2="142" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="367" x2="367" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="615" x2="615" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1133.5" x2="1133.5" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1352.5" x2="1352.5" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1547.5" x2="1547.5" y1="104.5469" y2="790.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1879" x2="1879" y1="104.5469" y2="790.7344"/><path d="M49,78.25 L236,78.25 C241,78.25 241,91.3984 241,91.3984 C241,91.3984 241,104.5469 236,104.5469 L49,104.5469 C44,104.5469 44,91.3984 44,91.3984 C44,91.3984 44,78.25 49,78.25 " fill="#FEFECE" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M236,78.25 C231,78.25 231,91.3984 231,91.3984 C231,104.5469 236,104.5469 236,104.5469 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="49" y="96.2451">jms.dlms.requests.queue</text><path d="M49,789.7344 L236,789.7344 C241,789.7344 241,802.8828 241,802.8828 C241,802.8828 241,816.0313 236,816.0313 L49,816.0313 C44,816.0313 44,802.8828 44,802.8828 C44,802.8828 44,789.7344 49,789.7344 " fill="#FEFECE" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M236,789.7344 C231,789.7344 231,802.8828 231,802.8828 C231,816.0313 236,816.0313 236,816.0313 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="49" y="807.7295">jms.dlms.requests.queue</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="149" x="289.5" y="84.9482">«MessageProcessor»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="226" x="251" y="101.2451">DeviceRequestMessageListener</text><ellipse cx="367" cy="55.9531" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="363,43.9531,369,38.9531,367,43.9531,369,48.9531,363,43.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="149" x="289.5" y="802.7295">«MessageProcessor»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="226" x="251" y="819.0264">DeviceRequestMessageListener</text><ellipse cx="367" cy="838.3281" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="363,826.3281,369,821.3281,367,826.3281,369,831.3281,363,826.3281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="493" y="101.2451">DeviceRequestMessageProcessor</text><ellipse cx="615" cy="72.25" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="611,60.25,617,55.25,615,60.25,617,65.25,611,60.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="493" y="802.7295">DeviceRequestMessageProcessor</text><ellipse cx="615" cy="822.0313" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="611,810.0313,617,805.0313,615,810.0313,617,815.0313,611,810.0313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="1052.5" y="101.2451">DomainHelperService</text><ellipse cx="1134" cy="72.25" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1130,60.25,1136,55.25,1134,60.25,1136,65.25,1130,60.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="1052.5" y="802.7295">DomainHelperService</text><ellipse cx="1134" cy="822.0313" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1130,810.0313,1136,805.0313,1134,810.0313,1136,815.0313,1130,810.0313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1225.5" y="101.2451">DlmsConnectionMessageProcessor</text><ellipse cx="1352.5" cy="72.25" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1348.5,60.25,1354.5,55.25,1352.5,60.25,1354.5,65.25,1348.5,60.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1225.5" y="802.7295">DlmsConnectionMessageProcessor</text><ellipse cx="1352.5" cy="822.0313" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1348.5,810.0313,1354.5,805.0313,1352.5,810.0313,1354.5,815.0313,1348.5,810.0313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1489.5" y="101.2451">ThrottlingClient</text><ellipse cx="1547.5" cy="72.25" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1543.5,60.25,1549.5,55.25,1547.5,60.25,1549.5,65.25,1543.5,60.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1489.5" y="802.7295">ThrottlingClient</text><ellipse cx="1547.5" cy="822.0313" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1543.5,810.0313,1549.5,805.0313,1547.5,810.0313,1549.5,815.0313,1543.5,810.0313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1794" y="101.2451">DlmsConnectionHelper</text><ellipse cx="1879.5" cy="72.25" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1875.5,60.25,1881.5,55.25,1879.5,60.25,1881.5,65.25,1875.5,60.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1794" y="802.7295">DlmsConnectionHelper</text><ellipse cx="1879.5" cy="822.0313" fill="#FEFECE" filter="url(#foh2sw2w3s2df)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1875.5,810.0313,1881.5,805.0313,1879.5,810.0313,1881.5,815.0313,1875.5,810.0313" style="stroke:#A80036;stroke-width:1.0;"/><path d="M5,119.5469 L5,159.5469 L276,159.5469 L276,129.5469 L266,119.5469 L5,119.5469 " fill="#FBFB77" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M266,119.5469 L266,129.5469 L276,129.5469 L266,119.5469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="11" y="136.6138">Queue with requests for DLMS devices</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="11" y="151.7466">coming in from OSGP Core.</text><path d="M211,173.8125 L211,228.8125 L519,228.8125 L519,183.8125 L509,173.8125 L211,173.8125 " fill="#FBFB77" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M509,173.8125 L509,183.8125 L519,183.8125 L509,173.8125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="217" y="190.8794">Abstract base class for device request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="217" y="206.0122">message processors,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="217" y="221.145">extends DlmsConnectionMessageProcessor.</text><polygon fill="#A80036" points="355,255.3438,365,259.3438,355,263.3438,359,259.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="142.5" x2="361" y1="259.3438" y2="259.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="149.5" y="254.2778">onMessage</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="59" x="226.5" y="254.2778">message</text><polygon fill="#A80036" points="603,284.4766,613,288.4766,603,292.4766,607,288.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="609" y1="288.4766" y2="288.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="374" y="283.4106">processMessage</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="59" x="485" y="283.4106">message</text><path d="M452,301.4766 L452,341.4766 L774,341.4766 L774,311.4766 L764,301.4766 L452,301.4766 " fill="#FBFB77" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M764,301.4766 L764,311.4766 L774,311.4766 L764,301.4766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="458" y="318.5435">The flow depicted is the one for a request that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="458" y="333.6763">leads to a connection with an existing device.</text><polygon fill="#A80036" points="1122,367.875,1132,371.875,1122,375.875,1126,371.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="615" x2="1128" y1="371.875" y2="371.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="622" y="366.8091">findDlmsDevice</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="120" x="730" y="366.8091">messageMetadata</text><polygon fill="#A80036" points="1340.5,397.0078,1350.5,401.0078,1340.5,405.0078,1344.5,401.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="615" x2="1346.5" y1="401.0078" y2="401.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="622" y="395.9419">createConnectionForDevice</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="805" y="395.9419">device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="848" y="395.9419">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="120" x="856" y="395.9419">messageMetadata</text><polygon fill="#A80036" points="1535.5,426.1406,1545.5,430.1406,1535.5,434.1406,1539.5,430.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1541.5" y1="430.1406" y2="430.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1359.5" y="425.0747">requestPermit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="20" x="1455.5" y="425.0747">bts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1475.5" y="425.0747">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="23" x="1483.5" y="425.0747">cell</text><polygon fill="#A80036" points="1363.5,455.2734,1353.5,459.2734,1363.5,463.2734,1359.5,459.2734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1357.5" x2="1546.5" y1="459.2734" y2="459.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="1369.5" y="454.2075">permit</text><path d="M1140,472.2734 L1140,527.2734 L1561,527.2734 L1561,482.2734 L1551,472.2734 L1140,472.2734 " fill="#FBFB77" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1551,472.2734 L1551,482.2734 L1561,482.2734 L1551,472.2734 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="400" x="1146" y="489.3403">Creates a DLMS message listener that helps with keeping the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="1146" y="504.4731">invocation counter up to date and/or provides detailed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="1146" y="519.606">logging of DLMS messages between client and server.</text><polygon fill="#A80036" points="1867.5,553.8047,1877.5,557.8047,1867.5,561.8047,1871.5,557.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1873.5" y1="557.8047" y2="557.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1359.5" y="552.7388">createConnectionForDevice</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="120" x="1542.5" y="552.7388">messageMetadata</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1662.5" y="552.7388">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="1670.5" y="552.7388">device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1713.5" y="552.7388">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="1721.5" y="552.7388">dlmsMessageListener</text><path d="M1215.5,572.8047 L1284.5,572.8047 L1284.5,579.8047 L1274.5,589.8047 L1215.5,589.8047 L1215.5,572.8047 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="634" x="1215.5" y="572.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="1230.5" y="585.8716">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="545" x="1299.5" y="585.0151">[if an exception occurred creating the device connection in the DlmsConnectionHelper]</text><polygon fill="#A80036" points="1535.5,607.0703,1545.5,611.0703,1535.5,615.0703,1539.5,611.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1541.5" y1="611.0703" y2="611.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1359.5" y="606.0044">releasePermit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="1454.5" y="606.0044">permit</text><line style="stroke:#A80036;stroke-width:1.0;" x1="615" x2="657" y1="647.2031" y2="647.2031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="657" x2="657" y1="647.2031" y2="660.2031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="616" x2="657" y1="660.2031" y2="660.2031"/><polygon fill="#A80036" points="626,656.2031,616,660.2031,626,664.2031,622,660.2031" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="622" y="642.1372">getResponse</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="127" x="710" y="642.1372">connectionManager</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="837" y="642.1372">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="845" y="642.1372">device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="888" y="642.1372">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="103" x="896" y="642.1372">message.object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="999" y="642.1372">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="120" x="1007" y="642.1372">messageMetadata</text><path d="M336,673.2031 L336,713.2031 L889,713.2031 L889,683.2031 L879,673.2031 L336,673.2031 " fill="#FBFB77" filter="url(#foh2sw2w3s2df)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M879,673.2031 L879,683.2031 L889,683.2031 L879,673.2031 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="532" x="342" y="690.27">Operates on the device connection, and sends a response (regular or exceptional)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="342" y="705.4028">to OSGP Core.</text><polygon fill="#A80036" points="1340.5,739.6016,1350.5,743.6016,1340.5,747.6016,1344.5,743.6016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="615" x2="1346.5" y1="743.6016" y2="743.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="622" y="738.5356">doConnectionPostProcessing</text><polygon fill="#A80036" points="1535.5,768.7344,1545.5,772.7344,1535.5,776.7344,1539.5,772.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1541.5" y1="772.7344" y2="772.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1359.5" y="767.6685">releasePermit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="43" x="1454.5" y="767.6685">permit</text><!--MD5=[a9eb86fbd1c1647b2552166f0b4e465c]
@startuml
title Happy flow CDMA throttling
queue queue as "jms.dlms.requests.queue"
note over queue
Queue with requests for DLMS devices
coming in from OSGP Core.
end note
control DeviceRequestMessageListener <<MessageProcessor>>
note over DeviceRequestMessageListener
Abstract base class for device request
message processors,
extends DlmsConnectionMessageProcessor.
end note
control DeviceRequestMessageProcessor
control DomainHelperService
'control SessionProviderKpn
'control JasperWirelessTerminalClient
'control JasperWirelessSmsClient
control DlmsConnectionMessageProcessor
control ThrottlingClient
control DlmsConnectionHelper

queue -> DeviceRequestMessageListener : onMessage //message//
DeviceRequestMessageListener -> DeviceRequestMessageProcessor : processMessage //message//
note over DeviceRequestMessageProcessor
The flow depicted is the one for a request that
leads to a connection with an existing device.
end note
DeviceRequestMessageProcessor -> DomainHelperService : findDlmsDevice //messageMetadata//
DeviceRequestMessageProcessor -> DlmsConnectionMessageProcessor : createConnectionForDevice //device//, //messageMetadata//
DlmsConnectionMessageProcessor -> ThrottlingClient : requestPermit //bts//, //cell//
DlmsConnectionMessageProcessor <- - ThrottlingClient : //permit//
note over DlmsConnectionMessageProcessor
Creates a DLMS message listener that helps with keeping the
invocation counter up to date and/or provides detailed
logging of DLMS messages between client and server.
end note
DlmsConnectionMessageProcessor -> DlmsConnectionHelper : createConnectionForDevice //messageMetadata//, //device//, //dlmsMessageListener//
opt if an exception occurred creating the device connection in the DlmsConnectionHelper
DlmsConnectionMessageProcessor -> ThrottlingClient : releasePermit //permit//
end
DeviceRequestMessageProcessor -> DeviceRequestMessageProcessor : getResponse //connectionManager//, //device//, //message.object//, //messageMetadata//
note over DeviceRequestMessageProcessor
Operates on the device connection, and sends a response (regular or exceptional)
to OSGP Core.
end note
DeviceRequestMessageProcessor -> DlmsConnectionMessageProcessor : doConnectionPostProcessing
DlmsConnectionMessageProcessor -> ThrottlingClient : releasePermit //permit//
@enduml

@startuml
title Happy flow CDMA throttling
queue queue as "jms.dlms.requests.queue"
note over queue
Queue with requests for DLMS devices
coming in from OSGP Core.
end note
control DeviceRequestMessageListener <<MessageProcessor>>
note over DeviceRequestMessageListener
Abstract base class for device request
message processors,
extends DlmsConnectionMessageProcessor.
end note
control DeviceRequestMessageProcessor
control DomainHelperService
control DlmsConnectionMessageProcessor
control ThrottlingClient
control DlmsConnectionHelper

queue -> DeviceRequestMessageListener : onMessage //message//
DeviceRequestMessageListener -> DeviceRequestMessageProcessor : processMessage //message//
note over DeviceRequestMessageProcessor
The flow depicted is the one for a request that
leads to a connection with an existing device.
end note
DeviceRequestMessageProcessor -> DomainHelperService : findDlmsDevice //messageMetadata//
DeviceRequestMessageProcessor -> DlmsConnectionMessageProcessor : createConnectionForDevice //device//, //messageMetadata//
DlmsConnectionMessageProcessor -> ThrottlingClient : requestPermit //bts//, //cell//
DlmsConnectionMessageProcessor <- - ThrottlingClient : //permit//
note over DlmsConnectionMessageProcessor
Creates a DLMS message listener that helps with keeping the
invocation counter up to date and/or provides detailed
logging of DLMS messages between client and server.
end note
DlmsConnectionMessageProcessor -> DlmsConnectionHelper : createConnectionForDevice //messageMetadata//, //device//, //dlmsMessageListener//
opt if an exception occurred creating the device connection in the DlmsConnectionHelper
DlmsConnectionMessageProcessor -> ThrottlingClient : releasePermit //permit//
end
DeviceRequestMessageProcessor -> DeviceRequestMessageProcessor : getResponse //connectionManager//, //device//, //message.object//, //messageMetadata//
note over DeviceRequestMessageProcessor
Operates on the device connection, and sends a response (regular or exceptional)
to OSGP Core.
end note
DeviceRequestMessageProcessor -> DlmsConnectionMessageProcessor : doConnectionPostProcessing
DlmsConnectionMessageProcessor -> ThrottlingClient : releasePermit //permit//
@enduml

PlantUML version 1.2021.11(Sat Oct 02 15:26:11 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>